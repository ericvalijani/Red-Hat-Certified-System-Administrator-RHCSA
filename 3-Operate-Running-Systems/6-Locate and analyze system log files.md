

## logging daemons = apps that collect, orginize and store logs. ex: rsyslog 

________________________________________________________________________________________________


to find out the exact log file of an app. ex: sshd

```bash
[bob@centos-host ~]$ sudo grep -r 'sshd' /var/log

/var/log/secure:May 14 16:35:18 localhost sshd[29262]: error: kex_exchange_identification: Connection closed by remote host
/var/log/secure:May 14 16:35:35 localhost sshd[29266]: error: kex_exchange_identification: Connection closed by remote host
/var/log/secure:May 14 16:35:53 localhost sshd[29271]: error: kex_exchange_identification: Connection closed by remote host
/var/log/secure:May 14 16:36:04 localhost sudo[29272]:     bob : TTY=pts/0 ; PWD=/home/bob ; USER=root ; COMMAND=/bin/grep -r sshd /var/log
/var/log/secure:May 14 16:36:08 localhost sudo[29276]:     bob

```


so it's:   /var/log/secure


________________________________________________________________________________________________


```bash
[bob@centos-host ~]$ sudo tail -f /var/log/secure 
```

________________________________________________________________________________________________

## `journalctl /usr/bin/sudo`

## journalctl - Query the systemd journal

only show the logs generated by this command: ex: by sudo

```bash
[bob@centos-host ~]$ which sudo
/usr/bin/sudo
```

```bash
[bob@centos-host ~]$ journalctl /usr/bin/sudo
```

________________________________________________________________________________________________

## `journalctl -u sshd.service`

to see the logs related to each system unit

```bash
[bob@centos-host ~]$ sudo journalctl -u sshd.service

-- Logs begin at Sun 2023-05-14 15:31:59 UTC, end at Sun 2023-05-14 16:46:16 UTC. --
May 14 15:32:13 localhost.localdomain systemd[1]: Starting OpenSSH server daemon...
May 14 15:32:13 localhost.localdomain sshd[861]: Server listening on 0.0.0.0 port 22.
May 14 15:32:13 localhost.localdomain sshd[861]: Server listening on :: port 22.
May 14 15:32:13 localhost.localdomain systemd[1]: Started OpenSSH server daemon.
May 14 15:32:17 localhost.localdomain sshd[923]: Accepted publickey for vagrant from 192>
May 14 15:32:17 localhost.localdomain sshd[923]: pam_unix(sshd:session): session opene
```


________________________________________________________________________________________________


see all logs

`-e`      go to the `end` of logs

`-f`      `follow` mode

```bash
[bob@centos-host ~]$ journalctl -ef
```

________________________________________________________________________________________________


## `journalctl -p`

filter logs by `Priority`:

`alert`    `crit`     `debug`    `emerg`    `err`      `info`     `notice`   `warning` 


```bash
[bob@centos-host ~]$ sudo journalctl -p 
alert    crit     debug    emerg    err      info     notice   warning 
```

```bash
[bob@centos-host ~]$ sudo journalctl -p err
```

________________________________________________________________________________________________

## `journalctl -S 01:00 -U 02:00`

filter logs based oh `time` (hour)

```bash
[bob@centos-host ~]$ sudo journalctl -S 01:00 -U 02:00
```

```bash
[bob@centos-host ~]$ sudo journalctl -S '2022-11-12 10:11:12'
```

________________________________________________________________________________________________

## `journalctl -b`

see logs of this `boot`

```bash
[bob@centos-host ~]$ sudo journalctl -b 0
```

see logs of the previous boot

```bash
[bob@centos-host ~]$ sudo journalctl -b -1
```


________________________________________________________________________________________________

## `lastlog`

### to see when each `user` of a system `logs in` for the `last time`

```bash
[bob@centos-host ~]$ lastlog

Username         Port     From             Latest
root                                       **Never logged in**
bin                                        **Never logged in**
daemon                                     **Never logged in**
adm                                        **Never logged in**
lp                                         **Never logged in**
sync                                       **Never logged in**
shutdown                                   **Never logged in**
halt                                       **Never logged in**
mail                                       **Never logged in**
operator                                   **Never logged in**
games                                      **Never logged in**
ftp                                        **Never logged in**
nobody                                     **Never logged in**
dbus                                       **Never logged in**
systemd-coredump                           **Never logged in**
systemd-resolve                            **Never logged in**
tss                                        **Never logged in**
polkitd                                    **Never logged in**
rpc                                        **Never logged in**
unbound                                    **Never logged in**
sssd                                       **Never logged in**
rpcuser                                    **Never logged in**
chrony                                     **Never logged in**
sshd                                       **Never logged in**
rngd                                       **Never logged in**
vagrant                                    **Never logged in**
admin                                      **Never logged in**
bob              pts/0                     Sun May 14 16:24:25 +0000 2023
```

________________________________________________________________________________________________


## `journalctl -g`

Analyse the `info` priority logs through journalctl that Begins with letter `c`

```bash
[bob@centos-host ~]$ sudo journalctl -p err -g '^b'
```


________________________________________________________________________________________________
